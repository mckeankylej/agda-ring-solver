<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Polynomial.NormalForm.Semantics</title><link rel="stylesheet" href="Agda.css"></head><body><pre><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Option">--without-K</a> <a id="25" class="Option">--safe</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">open</a> <a id="42" class="Keyword">import</a> <a id="49" href="Polynomial.Parameters.html" class="Module">Polynomial.Parameters</a>

<a id="72" class="Comment">-- &quot;Evaluating&quot; a polynomial, using Horner&#39;s method.</a>

<a id="126" class="Keyword">module</a> <a id="133" href="Polynomial.NormalForm.Semantics.html" class="Module">Polynomial.NormalForm.Semantics</a>
  <a id="167" class="Symbol">{</a><a id="168" href="Polynomial.NormalForm.Semantics.html#168" class="Bound">r₁</a> <a id="171" href="Polynomial.NormalForm.Semantics.html#171" class="Bound">r₂</a> <a id="174" href="Polynomial.NormalForm.Semantics.html#174" class="Bound">r₃</a><a id="176" class="Symbol">}</a>
  <a id="180" class="Symbol">(</a><a id="181" href="Polynomial.NormalForm.Semantics.html#181" class="Bound">homo</a> <a id="186" class="Symbol">:</a> <a id="188" href="Polynomial.Parameters.html#795" class="Record">Homomorphism</a> <a id="201" href="Polynomial.NormalForm.Semantics.html#168" class="Bound">r₁</a> <a id="204" href="Polynomial.NormalForm.Semantics.html#171" class="Bound">r₂</a> <a id="207" href="Polynomial.NormalForm.Semantics.html#174" class="Bound">r₃</a><a id="209" class="Symbol">)</a>
  <a id="213" class="Keyword">where</a>

<a id="220" class="Keyword">open</a> <a id="225" class="Keyword">import</a> <a id="232" href="Data.Nat.html" class="Module">Data.Nat</a>     <a id="245" class="Keyword">using</a> <a id="251" class="Symbol">(</a><a id="252" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a><a id="253" class="Symbol">;</a> <a id="255" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a><a id="258" class="Symbol">;</a> <a id="260" href="Agda.Builtin.Nat.html#115" class="InductiveConstructor">zero</a><a id="264" class="Symbol">)</a>
<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Data.Vec.html" class="Module">Data.Vec</a>     <a id="291" class="Keyword">using</a> <a id="297" class="Symbol">(</a><a id="298" href="Data.Vec.html#773" class="Datatype">Vec</a><a id="301" class="Symbol">;</a> <a id="303" href="Data.Vec.html#813" class="InductiveConstructor">[]</a><a id="305" class="Symbol">;</a> <a id="307" href="Data.Vec.html#832" class="InductiveConstructor Operator">_∷_</a><a id="310" class="Symbol">)</a>
<a id="312" class="Keyword">open</a> <a id="317" class="Keyword">import</a> <a id="324" href="Data.List.html" class="Module">Data.List</a>    <a id="337" class="Keyword">using</a> <a id="343" class="Symbol">(</a><a id="344" href="Data.List.Base.html#9851" class="InductiveConstructor">[]</a><a id="346" class="Symbol">;</a> <a id="348" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">_∷_</a><a id="351" class="Symbol">)</a>
<a id="353" class="Keyword">open</a> <a id="358" class="Keyword">import</a> <a id="365" href="Data.Product.html" class="Module">Data.Product</a> <a id="378" class="Keyword">using</a> <a id="384" class="Symbol">(</a><a id="385" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">_,_</a><a id="388" class="Symbol">;</a> <a id="390" href="Data.Product.html#1389" class="Function Operator">_×_</a><a id="393" class="Symbol">)</a>

<a id="396" class="Keyword">open</a> <a id="401" class="Keyword">import</a> <a id="408" href="Polynomial.NormalForm.InjectionIndex.html" class="Module">Polynomial.NormalForm.InjectionIndex</a>
<a id="445" class="Keyword">open</a> <a id="450" href="Polynomial.Parameters.html#795" class="Module">Homomorphism</a> <a id="463" href="Polynomial.NormalForm.Semantics.html#181" class="Bound">homo</a>
<a id="468" class="Keyword">open</a> <a id="473" class="Keyword">import</a> <a id="480" href="Polynomial.NormalForm.Definition.html" class="Module">Polynomial.NormalForm.Definition</a> <a id="513" href="Polynomial.Parameters.html#862" class="Field">coeffs</a>

<a id="521" class="Keyword">open</a> <a id="526" class="Keyword">import</a> <a id="533" href="Polynomial.Exponentiation.html" class="Module">Polynomial.Exponentiation</a> <a id="559" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#2040" class="Function">rawRing</a>

<a id="drop"></a><a id="568" href="Polynomial.NormalForm.Semantics.html#568" class="Function">drop</a> <a id="573" class="Symbol">:</a> <a id="575" class="Symbol">∀</a> <a id="577" class="Symbol">{</a><a id="578" href="Polynomial.NormalForm.Semantics.html#578" class="Bound">i</a> <a id="580" href="Polynomial.NormalForm.Semantics.html#580" class="Bound">n</a><a id="581" class="Symbol">}</a> <a id="583" class="Symbol">→</a> <a id="585" href="Polynomial.NormalForm.Semantics.html#578" class="Bound">i</a> <a id="587" href="Data.Nat.Base.html#2376" class="Datatype Operator">≤′</a> <a id="590" href="Polynomial.NormalForm.Semantics.html#580" class="Bound">n</a> <a id="592" class="Symbol">→</a> <a id="594" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="598" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="606" href="Polynomial.NormalForm.Semantics.html#580" class="Bound">n</a> <a id="608" class="Symbol">→</a> <a id="610" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="614" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="622" href="Polynomial.NormalForm.Semantics.html#578" class="Bound">i</a>
<a id="624" href="Polynomial.NormalForm.Semantics.html#568" class="Function">drop</a> <a id="629" href="Data.Nat.Base.html#2407" class="InductiveConstructor">≤′-refl</a> <a id="637" href="Polynomial.NormalForm.Semantics.html#637" class="Bound">Ρ</a> <a id="639" class="Symbol">=</a> <a id="641" href="Polynomial.NormalForm.Semantics.html#637" class="Bound">Ρ</a>
<a id="643" href="Polynomial.NormalForm.Semantics.html#568" class="Function">drop</a> <a id="648" class="Symbol">(</a><a id="649" href="Data.Nat.Base.html#2450" class="InductiveConstructor">≤′-step</a> <a id="657" href="Polynomial.NormalForm.Semantics.html#657" class="Bound">si≤n</a><a id="661" class="Symbol">)</a> <a id="663" class="Symbol">(_</a> <a id="666" href="Data.Vec.html#832" class="InductiveConstructor Operator">∷</a> <a id="668" href="Polynomial.NormalForm.Semantics.html#668" class="Bound">Ρ</a><a id="669" class="Symbol">)</a> <a id="671" class="Symbol">=</a> <a id="673" href="Polynomial.NormalForm.Semantics.html#568" class="Function">drop</a> <a id="678" href="Polynomial.NormalForm.Semantics.html#657" class="Bound">si≤n</a> <a id="683" href="Polynomial.NormalForm.Semantics.html#668" class="Bound">Ρ</a>

<a id="vec-uncons"></a><a id="686" href="Polynomial.NormalForm.Semantics.html#686" class="Function">vec-uncons</a> <a id="697" class="Symbol">:</a> <a id="699" class="Symbol">∀</a> <a id="701" class="Symbol">{</a><a id="702" href="Polynomial.NormalForm.Semantics.html#702" class="Bound">n</a><a id="703" class="Symbol">}</a> <a id="705" class="Symbol">→</a> <a id="707" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="711" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="719" class="Symbol">(</a><a id="720" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="724" href="Polynomial.NormalForm.Semantics.html#702" class="Bound">n</a><a id="725" class="Symbol">)</a> <a id="727" class="Symbol">→</a> <a id="729" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="737" href="Data.Product.html#1389" class="Function Operator">×</a> <a id="739" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="743" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="751" href="Polynomial.NormalForm.Semantics.html#702" class="Bound">n</a>
<a id="753" href="Polynomial.NormalForm.Semantics.html#686" class="Function">vec-uncons</a> <a id="764" class="Symbol">(</a><a id="765" href="Polynomial.NormalForm.Semantics.html#765" class="Bound">x</a> <a id="767" href="Data.Vec.html#832" class="InductiveConstructor Operator">∷</a> <a id="769" href="Polynomial.NormalForm.Semantics.html#769" class="Bound">xs</a><a id="771" class="Symbol">)</a> <a id="773" class="Symbol">=</a> <a id="775" href="Polynomial.NormalForm.Semantics.html#765" class="Bound">x</a> <a id="777" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="779" href="Polynomial.NormalForm.Semantics.html#769" class="Bound">xs</a>
<a id="782" class="Symbol">{-#</a> <a id="786" class="Keyword">INLINE</a> <a id="793" href="Polynomial.NormalForm.Semantics.html#686" class="Function">vec-uncons</a> <a id="804" class="Symbol">#-}</a>

<a id="drop-1"></a><a id="809" href="Polynomial.NormalForm.Semantics.html#809" class="Function">drop-1</a> <a id="816" class="Symbol">:</a> <a id="818" class="Symbol">∀</a> <a id="820" class="Symbol">{</a><a id="821" href="Polynomial.NormalForm.Semantics.html#821" class="Bound">i</a> <a id="823" href="Polynomial.NormalForm.Semantics.html#823" class="Bound">n</a><a id="824" class="Symbol">}</a> <a id="826" class="Symbol">→</a> <a id="828" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="832" href="Polynomial.NormalForm.Semantics.html#821" class="Bound">i</a> <a id="834" href="Data.Nat.Base.html#2376" class="Datatype Operator">≤′</a> <a id="837" href="Polynomial.NormalForm.Semantics.html#823" class="Bound">n</a> <a id="839" class="Symbol">→</a> <a id="841" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="845" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="853" href="Polynomial.NormalForm.Semantics.html#823" class="Bound">n</a> <a id="855" class="Symbol">→</a> <a id="857" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="865" href="Data.Product.html#1389" class="Function Operator">×</a> <a id="867" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="871" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="879" href="Polynomial.NormalForm.Semantics.html#821" class="Bound">i</a>
<a id="881" href="Polynomial.NormalForm.Semantics.html#809" class="Function">drop-1</a> <a id="888" href="Polynomial.NormalForm.Semantics.html#888" class="Bound">si≤n</a> <a id="893" href="Polynomial.NormalForm.Semantics.html#893" class="Bound">xs</a> <a id="896" class="Symbol">=</a> <a id="898" href="Polynomial.NormalForm.Semantics.html#686" class="Function">vec-uncons</a> <a id="909" class="Symbol">(</a><a id="910" href="Polynomial.NormalForm.Semantics.html#568" class="Function">drop</a> <a id="915" href="Polynomial.NormalForm.Semantics.html#888" class="Bound">si≤n</a> <a id="920" href="Polynomial.NormalForm.Semantics.html#893" class="Bound">xs</a><a id="922" class="Symbol">)</a>
<a id="924" class="Symbol">{-#</a> <a id="928" class="Keyword">INLINE</a> <a id="935" href="Polynomial.NormalForm.Semantics.html#809" class="Function">drop-1</a> <a id="942" class="Symbol">#-}</a>

<a id="_*⟨_⟩^_"></a><a id="947" href="Polynomial.NormalForm.Semantics.html#947" class="Function Operator">_*⟨_⟩^_</a> <a id="955" class="Symbol">:</a> <a id="957" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="965" class="Symbol">→</a> <a id="967" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="975" class="Symbol">→</a> <a id="977" href="Agda.Builtin.Nat.html#97" class="Datatype">ℕ</a> <a id="979" class="Symbol">→</a> <a id="981" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a>
<a id="989" href="Polynomial.NormalForm.Semantics.html#989" class="Bound">x</a> <a id="991" href="Polynomial.NormalForm.Semantics.html#947" class="Function Operator">*⟨</a> <a id="994" href="Polynomial.NormalForm.Semantics.html#994" class="Bound">ρ</a> <a id="996" href="Polynomial.NormalForm.Semantics.html#947" class="Function Operator">⟩^</a> <a id="999" href="Agda.Builtin.Nat.html#115" class="InductiveConstructor">ℕ.zero</a> <a id="1006" class="Symbol">=</a> <a id="1008" href="Polynomial.NormalForm.Semantics.html#989" class="Bound">x</a>
<a id="1010" href="Polynomial.NormalForm.Semantics.html#1010" class="Bound">x</a> <a id="1012" href="Polynomial.NormalForm.Semantics.html#947" class="Function Operator">*⟨</a> <a id="1015" href="Polynomial.NormalForm.Semantics.html#1015" class="Bound">ρ</a> <a id="1017" href="Polynomial.NormalForm.Semantics.html#947" class="Function Operator">⟩^</a> <a id="1020" href="Agda.Builtin.Nat.html#128" class="InductiveConstructor">suc</a> <a id="1024" href="Polynomial.NormalForm.Semantics.html#1024" class="Bound">i</a> <a id="1026" class="Symbol">=</a> <a id="1028" href="Polynomial.NormalForm.Semantics.html#1015" class="Bound">ρ</a> <a id="1030" href="Polynomial.Exponentiation.html#166" class="Function Operator">^</a> <a id="1032" href="Polynomial.NormalForm.Semantics.html#1024" class="Bound">i</a> <a id="1034" href="Polynomial.Exponentiation.html#166" class="Function Operator">+1</a> <a id="1037" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1385" class="Function Operator">*</a> <a id="1039" href="Polynomial.NormalForm.Semantics.html#1010" class="Bound">x</a>
<a id="1041" class="Symbol">{-#</a> <a id="1045" class="Keyword">INLINE</a> <a id="1052" href="Polynomial.NormalForm.Semantics.html#947" class="Function Operator">_*⟨_⟩^_</a> <a id="1060" class="Symbol">#-}</a>

<a id="1065" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1146" class="Comment">-- Evaluation</a>
<a id="1160" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1241" class="Comment">-- Why do we have three functions here? Why are they so weird looking?</a>
<a id="1312" class="Comment">--</a>
<a id="1315" class="Comment">-- These three functions are the main bottleneck for all of the proofs: as such,</a>
<a id="1396" class="Comment">-- slight changes can dramatically affect the length of proof code.</a>
<a id="1464" class="Keyword">mutual</a>
  <a id="_⟦∷⟧_"></a><a id="1473" href="Polynomial.NormalForm.Semantics.html#1473" class="Function Operator">_⟦∷⟧_</a> <a id="1479" class="Symbol">:</a> <a id="1481" class="Symbol">∀</a> <a id="1483" class="Symbol">{</a><a id="1484" href="Polynomial.NormalForm.Semantics.html#1484" class="Bound">n</a><a id="1485" class="Symbol">}</a> <a id="1487" class="Symbol">→</a> <a id="1489" href="Polynomial.NormalForm.Definition.html#1078" class="Record">Poly</a> <a id="1494" href="Polynomial.NormalForm.Semantics.html#1484" class="Bound">n</a> <a id="1496" href="Data.Product.html#1389" class="Function Operator">×</a> <a id="1498" href="Polynomial.NormalForm.Definition.html#1777" class="Function">Coeffs</a> <a id="1505" href="Polynomial.NormalForm.Semantics.html#1484" class="Bound">n</a> <a id="1507" class="Symbol">→</a> <a id="1509" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="1517" href="Data.Product.html#1389" class="Function Operator">×</a> <a id="1519" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="1523" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="1531" href="Polynomial.NormalForm.Semantics.html#1484" class="Bound">n</a> <a id="1533" class="Symbol">→</a> <a id="1535" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a>
  <a id="1545" class="Symbol">(</a><a id="1546" href="Polynomial.NormalForm.Semantics.html#1546" class="Bound">x</a> <a id="1548" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1550" href="Polynomial.NormalForm.Semantics.html#1550" class="Bound">xs</a><a id="1552" class="Symbol">)</a> <a id="1554" href="Polynomial.NormalForm.Semantics.html#1473" class="Function Operator">⟦∷⟧</a> <a id="1558" class="Symbol">(</a><a id="1559" href="Polynomial.NormalForm.Semantics.html#1559" class="Bound">ρ</a> <a id="1561" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1563" href="Polynomial.NormalForm.Semantics.html#1563" class="Bound">ρs</a><a id="1565" class="Symbol">)</a> <a id="1567" class="Symbol">=</a> <a id="1569" href="Polynomial.NormalForm.Semantics.html#1559" class="Bound">ρ</a> <a id="1571" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1385" class="Function Operator">*</a> <a id="1573" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">Σ⟦</a> <a id="1576" href="Polynomial.NormalForm.Semantics.html#1550" class="Bound">xs</a> <a id="1579" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">⟧</a> <a id="1581" class="Symbol">(</a><a id="1582" href="Polynomial.NormalForm.Semantics.html#1559" class="Bound">ρ</a> <a id="1584" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1586" href="Polynomial.NormalForm.Semantics.html#1563" class="Bound">ρs</a><a id="1588" class="Symbol">)</a> <a id="1590" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1343" class="Function Operator">+</a> <a id="1592" href="Polynomial.NormalForm.Semantics.html#1752" class="Function Operator">⟦</a> <a id="1594" href="Polynomial.NormalForm.Semantics.html#1546" class="Bound">x</a> <a id="1596" href="Polynomial.NormalForm.Semantics.html#1752" class="Function Operator">⟧</a> <a id="1598" href="Polynomial.NormalForm.Semantics.html#1563" class="Bound">ρs</a>

  <a id="Σ⟦_⟧"></a><a id="1604" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">Σ⟦_⟧</a> <a id="1609" class="Symbol">:</a> <a id="1611" class="Symbol">∀</a> <a id="1613" class="Symbol">{</a><a id="1614" href="Polynomial.NormalForm.Semantics.html#1614" class="Bound">n</a><a id="1615" class="Symbol">}</a> <a id="1617" class="Symbol">→</a> <a id="1619" href="Polynomial.NormalForm.Definition.html#1777" class="Function">Coeffs</a> <a id="1626" href="Polynomial.NormalForm.Semantics.html#1614" class="Bound">n</a> <a id="1628" class="Symbol">→</a> <a id="1630" class="Symbol">(</a><a id="1631" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="1639" href="Data.Product.html#1389" class="Function Operator">×</a> <a id="1641" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="1645" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="1653" href="Polynomial.NormalForm.Semantics.html#1614" class="Bound">n</a><a id="1654" class="Symbol">)</a> <a id="1656" class="Symbol">→</a> <a id="1658" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a>
  <a id="1668" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">Σ⟦</a> <a id="1671" href="Polynomial.NormalForm.Semantics.html#1671" class="Bound">x</a> <a id="1673" href="Polynomial.NormalForm.Definition.html#2059" class="InductiveConstructor Operator">≠0</a> <a id="1676" href="Polynomial.NormalForm.Definition.html#896" class="InductiveConstructor Operator">Δ</a> <a id="1678" href="Polynomial.NormalForm.Semantics.html#1678" class="Bound">i</a> <a id="1680" href="Agda.Builtin.List.html#132" class="InductiveConstructor Operator">∷</a> <a id="1682" href="Polynomial.NormalForm.Semantics.html#1682" class="Bound">xs</a> <a id="1685" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">⟧</a> <a id="1687" class="Symbol">(</a><a id="1688" href="Polynomial.NormalForm.Semantics.html#1688" class="Bound">ρ</a> <a id="1690" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1692" href="Polynomial.NormalForm.Semantics.html#1692" class="Bound">ρs</a><a id="1694" class="Symbol">)</a> <a id="1696" class="Symbol">=</a> <a id="1698" class="Symbol">((</a><a id="1700" href="Polynomial.NormalForm.Semantics.html#1671" class="Bound">x</a> <a id="1702" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1704" href="Polynomial.NormalForm.Semantics.html#1682" class="Bound">xs</a><a id="1706" class="Symbol">)</a> <a id="1708" href="Polynomial.NormalForm.Semantics.html#1473" class="Function Operator">⟦∷⟧</a> <a id="1712" class="Symbol">(</a><a id="1713" href="Polynomial.NormalForm.Semantics.html#1688" class="Bound">ρ</a> <a id="1715" href="Agda.Builtin.Sigma.html#139" class="InductiveConstructor Operator">,</a> <a id="1717" href="Polynomial.NormalForm.Semantics.html#1692" class="Bound">ρs</a><a id="1719" class="Symbol">))</a> <a id="1722" href="Polynomial.NormalForm.Semantics.html#947" class="Function Operator">*⟨</a> <a id="1725" href="Polynomial.NormalForm.Semantics.html#1688" class="Bound">ρ</a> <a id="1727" href="Polynomial.NormalForm.Semantics.html#947" class="Function Operator">⟩^</a> <a id="1730" href="Polynomial.NormalForm.Semantics.html#1678" class="Bound">i</a>
  <a id="1734" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">Σ⟦</a> <a id="1737" href="Agda.Builtin.List.html#117" class="InductiveConstructor">[]</a> <a id="1740" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">⟧</a> <a id="1742" class="Symbol">_</a> <a id="1744" class="Symbol">=</a> <a id="1746" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1469" class="Function">0#</a>

  <a id="⟦_⟧"></a><a id="1752" href="Polynomial.NormalForm.Semantics.html#1752" class="Function Operator">⟦_⟧</a> <a id="1756" class="Symbol">:</a> <a id="1758" class="Symbol">∀</a> <a id="1760" class="Symbol">{</a><a id="1761" href="Polynomial.NormalForm.Semantics.html#1761" class="Bound">n</a><a id="1762" class="Symbol">}</a> <a id="1764" class="Symbol">→</a> <a id="1766" href="Polynomial.NormalForm.Definition.html#1078" class="Record">Poly</a> <a id="1771" href="Polynomial.NormalForm.Semantics.html#1761" class="Bound">n</a> <a id="1773" class="Symbol">→</a> <a id="1775" href="Data.Vec.html#773" class="Datatype">Vec</a> <a id="1779" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a> <a id="1787" href="Polynomial.NormalForm.Semantics.html#1761" class="Bound">n</a> <a id="1789" class="Symbol">→</a> <a id="1791" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#1263" class="Function">Carrier</a>
  <a id="1801" href="Polynomial.NormalForm.Semantics.html#1752" class="Function Operator">⟦</a> <a id="1803" href="Polynomial.NormalForm.Definition.html#1247" class="InductiveConstructor">Κ</a> <a id="1805" href="Polynomial.NormalForm.Semantics.html#1805" class="Bound">x</a>  <a id="1808" href="Polynomial.NormalForm.Definition.html#1135" class="InductiveConstructor Operator">Π</a> <a id="1810" href="Polynomial.NormalForm.Semantics.html#1810" class="Bound">i≤n</a> <a id="1814" href="Polynomial.NormalForm.Semantics.html#1752" class="Function Operator">⟧</a> <a id="1816" class="Symbol">_</a> <a id="1818" class="Symbol">=</a> <a id="1820" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#2551" class="Function Operator">⟦</a> <a id="1822" href="Polynomial.NormalForm.Semantics.html#1805" class="Bound">x</a> <a id="1824" href="Algebra.Solver.Ring.AlmostCommutativeRing.html#2551" class="Function Operator">⟧ᵣ</a>
  <a id="1829" href="Polynomial.NormalForm.Semantics.html#1752" class="Function Operator">⟦</a> <a id="1831" href="Polynomial.NormalForm.Definition.html#1279" class="InductiveConstructor">Σ</a> <a id="1833" href="Polynomial.NormalForm.Semantics.html#1833" class="Bound">xs</a> <a id="1836" href="Polynomial.NormalForm.Definition.html#1135" class="InductiveConstructor Operator">Π</a> <a id="1838" href="Polynomial.NormalForm.Semantics.html#1838" class="Bound">i≤n</a> <a id="1842" href="Polynomial.NormalForm.Semantics.html#1752" class="Function Operator">⟧</a> <a id="1844" href="Polynomial.NormalForm.Semantics.html#1844" class="Bound">Ρ</a> <a id="1846" class="Symbol">=</a> <a id="1848" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">Σ⟦</a> <a id="1851" href="Polynomial.NormalForm.Semantics.html#1833" class="Bound">xs</a> <a id="1854" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">⟧</a> <a id="1856" class="Symbol">(</a><a id="1857" href="Polynomial.NormalForm.Semantics.html#809" class="Function">drop-1</a> <a id="1864" href="Polynomial.NormalForm.Semantics.html#1838" class="Bound">i≤n</a> <a id="1868" href="Polynomial.NormalForm.Semantics.html#1844" class="Bound">Ρ</a><a id="1869" class="Symbol">)</a>
<a id="1871" class="Symbol">{-#</a> <a id="1875" class="Keyword">INLINE</a> <a id="1882" href="Polynomial.NormalForm.Semantics.html#1752" class="Function Operator">⟦_⟧</a> <a id="1886" class="Symbol">#-}</a>
<a id="1890" class="Symbol">{-#</a> <a id="1894" class="Keyword">INLINE</a> <a id="1901" href="Polynomial.NormalForm.Semantics.html#1604" class="Function Operator">Σ⟦_⟧</a> <a id="1906" class="Symbol">#-}</a>
<a id="1910" class="Comment">--------------------------------------------------------------------------------</a>
<a id="1991" class="Comment">-- Performance</a>
<a id="2006" class="Comment">--------------------------------------------------------------------------------</a>
<a id="2087" class="Comment">-- As you might imagine, the implementation of the functions above seriously</a>
<a id="2164" class="Comment">-- affect performance. What you might not realise, though, is that the most</a>
<a id="2240" class="Comment">-- important component is the *order of the arguments*. For instance, if</a>
<a id="2313" class="Comment">-- we change:</a>
<a id="2327" class="Comment">--</a>
<a id="2330" class="Comment">--   (x , xs) ⟦∷⟧ (ρ , ρs) = ρ * Σ⟦ xs ⟧ (ρ , ρs) + ⟦ x ⟧ ρs</a>
<a id="2391" class="Comment">--</a>
<a id="2394" class="Comment">-- To:</a>
<a id="2401" class="Comment">--</a>
<a id="2404" class="Comment">--   (x , xs) ⟦∷⟧ (ρ , ρs) = ⟦ x ⟧ ρs +  Σ⟦ xs ⟧ (ρ , ρs) * ρ</a>
<a id="2466" class="Comment">--</a>
<a id="2469" class="Comment">-- We get a function that&#39;s several orders of magnitude slower!</a>
</pre></body></html>